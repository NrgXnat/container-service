<!-- id: 36372911 -->

# Proposed

| Title              | Ticket                                          | Status                                                                                                                                                                            | Container                                                                                              | Tool                                                                        | Notes                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|:-------------------|:------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Snapshot generator | [CS-193](https://issues.xnat.org/browse/CS-193) | <ac:structured-macro ac:name="status"><ac:parameter ac:name="colour">Blue</ac:parameter><ac:parameter ac:name="title">Open</ac:parameter></ac:structured-macro>                   | None                                                                                                   | Unknown; WebBasedQcImageCreator?                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Anonymizer         | [CS-194](https://issues.xnat.org/browse/CS-194) | <ac:structured-macro ac:name="status"><ac:parameter ac:name="colour">Orange</ac:parameter><ac:parameter ac:name="title">Open, with questions</ac:parameter></ac:structured-macro> | None                                                                                                   | Unknown                                                                     | Would need project and/or site-wide anon scripts; container service doesn't provide those ([yet](https://issues.xnat.org/browse/CS-48)) so they would need to be downloaded in the container. What to do with existing dicom files? Leave them in place? If so, where do we put the anonymized ones, then? In a new `DICOM_ANON` resource? Or should we make new Scans/Sessions/Subjects for the anon data? What to do with original "dirty" ones? |
| Defacer            | [CS-195](https://issues.xnat.org/browse/CS-195) | <ac:structured-macro ac:name="status"><ac:parameter ac:name="colour">Orange</ac:parameter><ac:parameter ac:name="title">Open, with questions</ac:parameter></ac:structured-macro> | None                                                                                                   | Misha's [mask_face](http://nrg.wustl.edu/software/face-masking/usage/)      | Also see [face masking pipeline on Marketplace](http://marketplace.xnat.org/plugin/face-masking/). This tool uses MATLAB, which is a problem; but Dan said Misha has a compiled version.                                                                                                                                                                                                                                                           |
| ImageJ             | [CS-196](https://issues.xnat.org/browse/CS-196) | <ac:structured-macro ac:name="status"><ac:parameter ac:name="colour">Orange</ac:parameter><ac:parameter ac:name="title">Needs expert review</ac:parameter></ac:structured-macro>  | [fiji/fiji](https://hub.docker.com/r/fiji/fiji/) or [Dockerfiles](https://github.com/fiji/dockerfiles) | `ImageJ --headless`                                                         | ImageJ is less a single tool and more of a scripting platform. As such, users would want to be able to run their own scripts for this container to be useful.                                                                                                                                                                                                                                                                                      |
| 3DSlicer           | [CS-198](https://issues.xnat.org/browse/CS-198) | <ac:structured-macro ac:name="status"><ac:parameter ac:name="colour">Orange</ac:parameter><ac:parameter ac:name="title">Needs expert review</ac:parameter></ac:structured-macro>  | None                                                                                                   | `Slicer3 --launch <tool> <args...>`                                         | Slicer is a platform. Users may want specific plugins for this container to be useful. It is not likely we could make an image with all the plugins, and almost imposible to make commands for them all.                                                                                                                                                                                                                                           |
| Freesurfer         | [CS-199](https://issues.xnat.org/browse/CS-199) | <ac:structured-macro ac:name="status"><ac:parameter ac:name="colour">Red</ac:parameter><ac:parameter ac:name="title">Blocked</ac:parameter></ac:structured-macro>                 | Roll our own                                                                                           | `preprocessing script, recon-all`                                           | Blocked by [CS-29](https://issues.xnat.org/browse/CS-29) (XNAT has no internal API to add objects from XML files) and [CS-80](https://issues.xnat.org/browse/CS-80) (commands cannot upload outputs to other previously-created outputs).                                                                                                                                                                                                          |
| PUP                | [CS-200](https://issues.xnat.org/browse/CS-200) | <ac:structured-macro ac:name="status"><ac:parameter ac:name="colour">Red</ac:parameter><ac:parameter ac:name="title">Blocked</ac:parameter></ac:structured-macro>                 | Roll our own                                                                                           | `preprocessing script, pet_proc script`                                     | Blocked by [CS-29](https://issues.xnat.org/browse/CS-29) (XNAT has no internal API to add objects from XML files) and [CS-80](https://issues.xnat.org/browse/CS-80) (commands cannot upload outputs to other previously-created outputs). Also blocked by [NIL Tools](#a-note-on-nil-tools).                                                                                                                                                       |
| DICOM to BIDS      | [CS-207](https://issues.xnat.org/browse/CS-207) | <ac:structured-macro ac:name="status"><ac:parameter ac:name="colour">Yellow</ac:parameter><ac:parameter ac:name="title">In progress</ac:parameter></ac:structured-macro>          | Roll our own                                                                                           | Either Lauren's script, or [dcm2bids](https://github.com/cbedetti/Dcm2Bids) |                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| BIDS Apps          | [CS-237](https://issues.xnat.org/browse/CS-237) | <ac:structured-macro ac:name="status"><ac:parameter ac:name="colour">Blue</ac:parameter><ac:parameter ac:name="title">Open</ac:parameter></ac:structured-macro>                   | [Numerous](http://bids-apps.neuroimaging.io/apps/)                                                     | Numerous                                                                    | We can only run these on BIDS-formatted data, which we don't have (much of). And they are made to be run either on a single subject or across a group of them with the change of a single flag, but we can't launch in the latter way ([N->1](https://wiki.xnat.org/display/CS/Bulk+Launching+Containers)).                                                                                                                                        |

# Completed

| Title                   | Ticket                                          | Links                                                   | Notes                                                         |
|:------------------------|:------------------------------------------------|:--------------------------------------------------------|:--------------------------------------------------------------|
| CONDR_METS lesion atlas | [CS-191](https://issues.xnat.org/browse/CS-191) |                                                         | Not published; see [note on NIL Tools](#a-note-on-nil-tools). |
| DICOM to NIFTI          |                                                 | [xnat/dcm2niix](https://hub.docker.com/r/xnat/dcm2niix) |                                                               |

# A Note on NIL Tools
Many of the existing tools employed in the NRG lab—often as pipelines on CNDA or TIP—rely on tools written by the NeuroImaging Lab (NIL). These tools are not easily containerizable for two reasons:

1. The source code is not publicly available. This impedes publishing derivative works in several ways.
    * Dockerfiles should not reference this code. The purpose of a Dockerfile is to facilitate reproducible builds of Docker images on different machines or by different people. If the NIL tools are included, then the build may only take place on those few machines that have access to the source code.
    * The code should not be contained within a Docker image not controlled by NIL. This image would become the _de facto_ official release of the tools. If such an image were to exist, it should by all rights belong to the owner and creator of those tools: the NIL.
2. The tools often rely on the local availablity of atlas image files. Those altas images are available on the internal servers we have here, but are not generally available. If the atlases were included in a Docker image, its size would be many tens of gigabytes (typical sizes are tens to hundreds of megabytes). This would be prohibitive to install or develop against.

For this reason, any tool that is written using the NIL tools is not, in general, possible to containerize at this time. Exceptions are certainly possible; for instance, the lesion atlas image used only a few NIL tools, which could be copied directly into the Docker image itself. However, while this image can be created, is not distributable for reason 1. above.