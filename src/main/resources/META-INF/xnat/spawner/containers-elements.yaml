
####
#### Container Setup Group
####

dockerSetupPanel:
    kind: panel
    name: dockerSetupPanel
    label: Docker Server Setup
    footer: false
    contents:
        containerHostTemplate:
            tag: "div#container-host-editor-template.html-template"
            contents:
                containerHostEditor:
                    kind: panel.form
                    name: containerHostEditor
                    id: container-host-editor
                    header: false
                    footer: false
                    action: /xapi/docker/server
                    contentType: json
                    contents:
                        pad:
                            tag: div.pad20top
                        host:
                            kind: panel.input.text
                            id: host-name
                            name: host
                            label: Host Name
                            validation: not-empty
                        certPath:
                            kind: panel.input.text
                            id: cert-path
                            name: certPath
                            label: "Certificate Path"
                            className: hidden
        containerHostTable:
            tag: "div#container-host-manager"
        containerHostScript:
#            tag: script|src="/scripts/xnat/admin/containerHostManagement.js"
            tag: script|src="~/scripts/xnat/admin/containerHostManagement.js"

imageHostsPanel:
    kind: panel.form
    name: imageHosts
    label: Image Hosts
    url: /xapi/docker/hubs
    contentType: json
    contents:
        defaultHost:
            kind: panel.element
            label: Default Image Host
            contents:
                link:
                    tag: a.link
                    element:
                        href: https://hub.docker.com
                        target: _blank
                        html: https://hub.docker.com
        addHostCommand:
            kind: panel.element
            contents:
                button:
                    tag: button.add-image-host
                    element:
                        html: Add Image Host

installedImagesPanel:
    kind: panel.dataTable
    name: installedImagesPanel
    label: Installed Container Images and Commands
    url: /xapi/docker/images
    contentType: json



#################################################
####  Root Site Admin Spawner Config Object  ####
#################################################

siteSettings:
    kind: tabs
    name: containerAdminPage
    label: Administer Container Service
    meta:
        tabGroups:
            containerServiceTabGroup: Container Service
    contains: tabs
    tabs:
        containerServicesTab:
            kind: tab
            name: containerSetupTab
            label: Container Server Setup
            group: containerServiceTabGroup
            active: true
            contents:
                ${dockerSetupPanel}
                ${imageHostsPanel}
        imageCommandTab:
            kind: tab
            name: imagesCommandsTab
            label: "Images & Commands"
            group: containerServiceTabGroup
            active: true
            contents:
#                ${installedImagesPanel}