
####
#### Container Setup Group
####

dockerSetupPanel:
    kind: panel.form
    name: dockerSetupPanel
    label: Docker Server Setup
    url: /xapi/docker/server
    contentType: json
    contents:
        defaultHub:
            kind: panel.element
            label: Container Server Host(s)
            contents:
                link:
                    tag: a.link
                    element:
                        href: "#"
                        html: Default (https://hub.docker.com)
        addHub:
            kind: panel.element
            contents:
                button:
                    tag: button
                    element:
                        value: Add Container Server Host
                        html: Add Container Server Host
                        class: new-container-host
        containerHostTemplate:
            tag: "div#container-host-editor-template.html-template"
            contents:
                containerHostEditor:
                    kind: panel.form
                    name: containerHostEditor
                    id: container-host-editor
                    header: false
                    footer: false
                    action: /xapi/docker/hubs
                    contentType: json
                    contents:
                        pad:
                            tag: div.pad20top
                        id:
                            kind: panel.input.hidden
                            id: hub-id
                            name: id
                            className: hidden
                        hubName:
                            kind: panel.input.text
                            id: hub-name
                            name: hubName
                            label: Hub Name
                            validation: not-empty
                        hubUrl:
                            kind: panel.input.text
                            id: hub-url
                            name: hubUrl
                            label: URL
                            validation: not-empty
                        hubEnabled:
                            kind: panel.input.switchbox
                            id: hub-enabled
                            name: hubEnabled
                            label: Enable Hub
                            onText: Enabled
                            offText: Disabled
        containerHostScript:
            tag: script|src="~/scripts/xnat/admin/containerManagement.js"

imageHostsPanel:
    kind: panel.form
    name: imageHosts
    label: Image Hosts
    url: /xapi/docker/hubs
    contentType: json
    contents:
        defaultHost:
            kind: panel.element
            label: Default Image Host
            contents:
                link:
                    tag: a.link
                    element:
                        href: https://hub.docker.com
                        target: _blank
                        html: https://hub.docker.com
        addHostCommand:
            tag: button#add-image-host.btn1|style=margin-top:15px;
            content: Add Image Host

installedImagesPanel:
    kind: panel
    name: installedImagesPanel
    label: Installed Container Images and Commands
    url:

#################################################
####  Root Site Admin Spawner Config Object  ####
#################################################

siteSettings:
    kind: tabs
    name: containerAdminPage
    label: Administer Container Service
    meta:
        tabGroups:
            containerServiceTabGroup: Container Service
    contains: tabs
    tabs:
        containerServicesTab:
            kind: tab
            name: containerSetupTab
            label: Container Server Setup
            group: containerServiceTabGroup
            active: true
            contents:
                ${dockerSetupPanel}
                ${imageHostsPanel}
        imageCommandTab:
            kind: tab
            name: imagesCommandsTab
            label: "Images & Commands"
            group: containerServiceTabGroup
            active: true
            contents:
                ${installedImagesPanel}